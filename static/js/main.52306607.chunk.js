(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{47:function(e,t,n){e.exports=n(67)},66:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(5),i=n(25),s=n(23),c=n(17),l=n(18),d=n(7),p=n(8),m=n(11),u=n(9),b=n(10),h=n(75),g=n(79),v=n(78),y=n(41),C=n(20),f=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(v.a,{align:"left",className:"wi-full",options:K,onSelect:function(t){e.props.addComponent(e.props.region,t.value,0,e.props.id,e.props.panelIndex)}},r.a.createElement(y.a,null,r.a.createElement(C.a,{label:this.props.label})))}}]),t}(a.Component),E=n(2),x=n.n(E),D=n(74);function N(e){return Object.assign({},e)}function O(e,t,n,a,r){return"\n    ".concat(e," ").concat(r,", \n    in ").concat(t,". \n    Current position ").concat(n+1," of ").concat(a,".\n  ")}function w(e,t,n){var a=t;return"add"===n?++a>e.length-1&&(a=e.length-1):"sub"===n&&--a<0&&(a=0),a}function j(e,t,n){return e.find(function(e){return e[t]===n})}function k(e,t,n,a,o){if("string"===typeof e.component)return r.a.createElement("div",{className:x()("component",{grabbed:e.isGrabbed}),id:e.id,key:e.id,tabIndex:"0",onKeyDown:n,"data-type":e.value},r.a.createElement(D.a,{className:""},r.a.createElement(C.a,{assistiveText:{icon:"Grab ".concat(e.label)},iconCategory:"utility",iconName:"rows",onClick:a}),r.a.createElement(C.a,{assistiveText:{icon:"Delete ".concat(e.label)},iconCategory:"utility",iconName:"delete"})),r.a.createElement("div",{className:"mbs bg-gray pal"},e.label));var i=e.component;return r.a.createElement("div",{className:x()("component",{grabbed:e.isGrabbed}),"data-type":e.value,id:e.id,key:"component-".concat(e.id),onKeyDown:n,tabIndex:"0"},r.a.createElement(D.a,{className:""},r.a.createElement(C.a,{assistiveText:{icon:"Grab ".concat(e.label)},iconCategory:"utility",iconName:"rows",onClick:a}),r.a.createElement(C.a,{assistiveText:{icon:"Delete ".concat(e.label)},iconCategory:"utility",iconName:"delete"})),r.a.createElement(i,{addComponent:o,children:e.children,className:"mbs",handleKeyDown:n,handleStartDrag:a,id:"".concat(e.id),region:t}))}var I=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"renderPanel",value:function(e,t){var n=this,o=this.props.children.filter(function(e){return e.panelIndex===t});return r.a.createElement(h.a,{id:"".concat(this.props.id,"-").concat(t),key:"".concat(this.props.id,"-").concat(t),label:e},0===o.length?r.a.createElement(f,{addComponent:this.props.addComponent,id:this.props.id,label:"Add a Component: Tabs Panel ".concat(t+1),panelIndex:t,region:this.props.region}):r.a.createElement(a.Fragment,null,o.map(function(e,t){return k(e,n.props.region,n.props.handleKeyDown,n.props.handleStartDrag)})))}},{key:"render",value:function(){var e=this;return r.a.createElement(g.a,{className:this.props.className},T.map(function(t,n){return e.renderPanel(t,n)}))}}]),t}(a.Component),R=n(6),S=n(76),P=n(77),A=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={expandedPanels:{}},n.togglePanel=n.togglePanel.bind(Object(R.a)(Object(R.a)(n))),n}return Object(b.a)(t,e),Object(p.a)(t,[{key:"togglePanel",value:function(e,t){this.setState(function(e){return Object(l.a)({},e,{expandedPanels:Object(l.a)({},e.expandedPanels,Object(c.a)({},t,!e.expandedPanels[t]))})})}},{key:"renderPanel",value:function(e,t){var n=this,o=this.props.children.filter(function(e){return e.panelIndex===t});return r.a.createElement(S.a,{expanded:!!this.state.expandedPanels["".concat(this.props.id,"-").concat(t)],id:"".concat(this.props.id,"-").concat(t),key:"".concat(this.props.id,"-").concat(t),label:e,onTogglePanel:function(e){return n.togglePanel(e,"".concat(n.props.id,"-").concat(t))},summary:e},0===o.length?r.a.createElement(f,{addComponent:this.props.addComponent,id:this.props.id,label:"Add a Component: Accordion Panel ".concat(t+1),panelIndex:t,region:this.props.region}):r.a.createElement(a.Fragment,null,o.map(function(e,t){return k(e,n.props.region,n.props.handleKeyDown,n.props.handleStartDrag)})))}},{key:"render",value:function(){var e=this;return r.a.createElement(P.a,{id:this.props.id,className:"white-bkgd ".concat(this.props.className)},T.map(function(t,n){return e.renderPanel(t,n)}))}}]),t}(a.Component),T=["Label 1","Label 2","Label 3"],K=[{id:"chatter",component:"chatter",label:"Chatter",value:"chatter",rightIcon:{category:"utility",name:"tabset"}},{id:"tabs",component:I,children:[],label:"Tabs",value:"tabs",rightIcon:{category:"utility",name:"layers"}},{id:"accordion",component:A,children:[],label:"Accordion",value:"accordion",rightIcon:{category:"utility",name:"chat"}}],F={test:"test",regions:["HEADER","COMPONENT_PANEL","CANVAS","PROPERTY_PANEL"],canvasRegions:["builder-header","builder-main","builder-sidebar"],canvas:{header:{components:[{component:A,id:"001",value:"accordion",children:[{panelIndex:0,component:"chatter",label:"Chatter",id:"003",value:"chatter"}]}]},main:{components:[{component:I,id:"002",value:"tabs",children:[{panelIndex:0,component:"chatter",label:"Chatter",value:"chatter"}]}]},sidebar:{components:[]}}},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_REGION":return Object(l.a)({},e,{canvas:Object(l.a)({},e.canvas,Object(c.a)({},t.region,t.newRegionData))});default:return e}},L=Object(s.b)(z),U=n(45),G=n.n(U),H=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"renderComponents",value:function(e,t){var n=this;return 0===t.length?r.a.createElement(v.a,{align:"left",className:"wi-full",options:K,onSelect:function(t){n.props.addComponent(e,t.value)}},r.a.createElement(y.a,null,r.a.createElement(C.a,{label:"Add a Component: ".concat(e," Region")}))):t.map(function(t){return void 0!==t||null!==t?k(t,e,n.props.handleKeyDown,n.props.handleStartDrag,n.props.addComponent):null})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"main-builder",className:"maxs mbn pam pbn bg-blue dg builder-grid dg-stretch"},Object.keys(this.props.data).map(function(t,n){return r.a.createElement("section",{id:e.props.canvasRegions[n],className:"builder-region slds-text-align_center","aria-labelledby":"builder-".concat(t,"-header"),key:n},r.a.createElement("h2",{className:"slds-assistive-text"},t," region"),r.a.createElement("div",{className:"mal",id:"builder-".concat(t,"-components")},e.renderComponents(t,e.props.data[t].components)))}))}}]),t}(a.Component),M=n(21),_=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"renderHeaderActions",value:function(){return r.a.createElement(D.a,null,r.a.createElement(C.a,{assistiveText:{icon:"Undo"},iconCategory:"utility",iconName:"undo",iconSize:"medium",iconVariant:"border",onClick:function(){console.log("Undo Clicked")},variant:"icon"}),r.a.createElement(C.a,{assistiveText:{icon:"Redo"},iconCategory:"utility",iconName:"redo",iconSize:"medium",iconVariant:"border",onClick:function(){console.log("redo Clicked")},variant:"icon"}),r.a.createElement(C.a,{assistiveText:{icon:"Cut"},iconCategory:"utility",iconName:"cut",iconSize:"medium",iconVariant:"border",onClick:function(){console.log("cut Clicked")},variant:"icon"}),r.a.createElement(C.a,{assistiveText:{icon:"Copy"},iconCategory:"utility",iconName:"copy",iconSize:"medium",iconVariant:"border",onClick:function(){console.log("copy Clicked")},variant:"icon"}))}},{key:"renderHeaderViews",value:function(){return r.a.createElement("div",{className:"mlx dib"},r.a.createElement(v.a,{align:"right",options:[{label:"Desktop",value:"A0"},{label:"Mobile",value:"B0"}]},r.a.createElement(y.a,null,r.a.createElement(C.a,{className:"mrs",iconCategory:"utility",iconName:"down",iconPosition:"right",label:"Desktop"}))),r.a.createElement(v.a,{align:"right",options:[{label:"Scale to Fit",value:"A0"},{label:"Full size",value:"B0"}]},r.a.createElement(y.a,null,r.a.createElement(C.a,{className:"mhs",iconCategory:"utility",iconName:"down",iconPosition:"right",label:"Scale to Fit"}))),r.a.createElement(C.a,{className:"mhs",iconCategory:"utility",iconName:"refresh",iconPosition:"left",label:"Refresh"}))}},{key:"renderHeaderSave",value:function(){return r.a.createElement("div",null,r.a.createElement(C.a,{label:"Save",variant:"brand"}),r.a.createElement(C.a,{label:"Activate",variant:"brand"}))}},{key:"render",value:function(){return r.a.createElement("header",{id:"header-section"},r.a.createElement("section",{className:"df df-justify bg-navy"},r.a.createElement("div",null,r.a.createElement("span",{className:"pam dib brs border-white text-white"},r.a.createElement(M.a,{category:"utility",name:"builder",size:"small",inverse:!0}),r.a.createElement("span",{className:"phm"},"Lightning App Builder")),r.a.createElement("button",{className:"pam dib brs border-white text-white"},r.a.createElement("span",{className:"phm"},"Pages"),r.a.createElement(M.a,{category:"utility",name:"chevrondown",size:"x-small",inverse:!0}))),r.a.createElement("span",{className:"pam text-white"},"App Name"),r.a.createElement("div",null,r.a.createElement("button",{className:"pam dib brs border-white text-white"},r.a.createElement(M.a,{category:"utility",name:"back",size:"x-small",inverse:!0}),r.a.createElement("span",{className:"phm"},"Back")),r.a.createElement("button",{className:"pam dib brs border-white text-white"},r.a.createElement(M.a,{category:"utility",name:"help",size:"x-small",inverse:!0}),r.a.createElement("span",{className:"phm"},"Help")))),r.a.createElement("section",{className:"df df-justify bg-white"},r.a.createElement("div",{className:"pam"},this.renderHeaderActions(),this.renderHeaderViews()),r.a.createElement("div",{className:"pam"},this.renderHeaderSave())))}}]),t}(a.Component),B=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={currIndex:0},n.handleKeyDown=n.handleKeyDown.bind(Object(R.a)(Object(R.a)(n))),n}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidUpdate",value:function(e,t){var n=K[this.state.currIndex];t.currIndex!==this.state.currIndex&&document.getElementById(n.id).focus()}},{key:"handleKeyDown",value:function(e){var t=this.state.currIndex;"ArrowDown"===e.key?t=w(K,this.state.currIndex,"add"):"ArrowUp"===e.key&&(t=w(K,this.state.currIndex,"sub")),this.setState({currIndex:t})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"components-sidebar",className:"pam bg-white bas border-gray"},r.a.createElement("h2",{className:"mbs slds-text-heading_small"},"Lightning Components"),r.a.createElement("ul",null,K.map(function(t,n){return r.a.createElement("li",{className:"mbs df df-justify",key:t.id},r.a.createElement(C.a,{iconCategory:t.rightIcon.category,iconName:t.rightIcon.name,iconPosition:"left",label:t.label,onKeyDown:e.handleKeyDown,onClick:function(){e.props.handleStartDrag(t.id)},variant:"base",id:t.id,tabIndex:n===e.state.currIndex?"0":"-1"}),r.a.createElement("div",null,r.a.createElement(M.a,{assistiveText:{label:"Desktop Compatible"},category:"utility",name:"desktop",size:"x-small"}),r.a.createElement(M.a,{assistiveText:{label:"Mobile Compatible"},category:"utility",name:"phone_portrait",size:"x-small"})))})))}}]),t}(a.Component),V=(n(66),function(e){function t(e){var n;Object(d.a)(this,t);var a=N((n=Object(m.a)(this,Object(u.a)(t).call(this,e))).props.canvas);return n.state={allComponents:a,assistiveText:"",currFocusedElement:null,grabbedComponent:null,grabbedComponentCurrRegion:"header",grabbedComponentIndex:0,grabbedComponentType:null,isDragDropMode:!1},n.addComponent=n.addComponent.bind(Object(R.a)(Object(R.a)(n))),n.handleStartDrag=n.handleStartDrag.bind(Object(R.a)(Object(R.a)(n))),n.handleKeyDown=n.handleKeyDown.bind(Object(R.a)(Object(R.a)(n))),n}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidUpdate",value:function(){null!==this.state.currFocusedElement&&document.getElementById(this.state.currFocusedElement).focus()}},{key:"addComponent",value:function(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;null===this.state.grabbedComponent?n=N(j(K,"id",t)):n=N(this.state.grabbedComponent);n.id=G()(),n.isGrabbed=!1;var i=N(this.props.canvas[e]);if(o>-1){var s=j(i.components,"id",r);n.panelIndex=o,s.children.splice(o,0,n)}else i.components.splice(a,0,n);return this.props.updateRegion(e,i),this.setState({currFocusedElement:n.id}),n.id}},{key:"handleDrop",value:function(e){var t=N(this.props.canvas),n=this.addComponent(this.state.grabbedComponentCurrRegion,this.state.grabbedComponentType,this.state.grabbedComponentIndex),a=t[this.state.grabbedComponentCurrRegion].components,r=a.findIndex(function(e){return!0===e.isGrabbed});a.splice(r,1);var o=O(this.state.grabbedComponentType,this.state.grabbedComponentCurrRegion,this.state.grabbedComponentIndex,a.length,"dropped");this.setState(function(a){return{allComponents:t,assistiveText:o,currFocusedElement:e?n:a.currFocusedElement,grabbedComponent:null,grabbedComponentIndex:0,grabbedComponentCurrRegion:"header",isDragDropMode:!1}})}},{key:"handleStartDrag",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=N(this.props.canvas),r="header",o=0;if(null!==this.state.grabbedComponent&&this.handleDrop(),null!==n){var i=n.target.closest("section"),s=n.target.closest("div.component");t=N(j(a[r=i.id.substring(8)].components,"id",s.id)),o=a[r].components.findIndex(function(e){return e.id===s.id}),a[r].components.splice(o,1),this.props.updateRegion(r,a[r])}else{t=N(j(K,"id",e))}t.id="floating-".concat(e),t.isGrabbed=!0,a[r].components.splice(o,0,t);var c=O(e,r,o,a[r].components.length,"grabbed");this.setState({allComponents:a,assistiveText:c,currFocusedElement:t.id,isDragDropMode:!0,grabbedComponent:t,grabbedComponentIndex:o,grabbedComponentType:e,grabbedComponentCurrRegion:r})}},{key:"handleKeyDown",value:function(e){" "===e.key?(e.preventDefault(),null!==this.state.grabbedComponent?this.handleDrop(!0):this.handleStartDrag(e.target.getAttribute("data-type"),e)):"ArrowRight"===e.key||"ArrowLeft"===e.key?this.handleRightLeft(e):"ArrowUp"!==e.key&&"ArrowDown"!==e.key||this.handleUpDown(e)}},{key:"handleUpDown",value:function(e){e.preventDefault();var t=N(this.props.canvas),n=t[this.state.grabbedComponentCurrRegion].components,a=this.state.grabbedComponentIndex,r=w(n,a,"ArrowDown"===e.key?"add":"sub");n.splice(r,0,n.splice(a,1)[0]),t[this.state.grabbedComponentCurrRegion].component=n;var o=O(this.state.grabbedComponentType,this.state.grabbedComponentCurrRegion,r,n.length,"grabbed");this.setState({allComponents:t,assistiveText:o,grabbedComponentIndex:r})}},{key:"handleRightLeft",value:function(e){e.preventDefault();var t=N(this.props.canvas),n="builder-".concat(this.state.grabbedComponentCurrRegion),a=w(this.props.canvasRegions,this.props.canvasRegions.findIndex(function(e){return e===n}),"ArrowRight"===e.key?"add":"sub"),r=this.props.canvasRegions[a].substring(8),o=t[this.state.grabbedComponentCurrRegion].components,i=t[r].components;o.splice(this.state.grabbedComponentIndex,1),i.splice(0,0,this.state.grabbedComponent);var s=O(this.state.grabbedComponentType,r,0,i.length,"grabbed");this.setState({allComponents:t,assistiveText:s,grabbedComponentIndex:0,grabbedComponentCurrRegion:r})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App ht-full dg app-grid bg-gray"},r.a.createElement(_,null),r.a.createElement("main",{className:"dg main-grid dg-stretch"},r.a.createElement(B,{handleStartDrag:this.handleStartDrag}),r.a.createElement(H,{data:this.state.allComponents,addComponent:this.addComponent,isDragDropMode:this.state.isDragDropMode,handleKeyDown:this.handleKeyDown,canvasRegions:this.props.canvasRegions,handleStartDrag:this.handleStartDrag}),r.a.createElement("div",{id:"properties-sidebar",className:"pam bg-white bas border-gray"},r.a.createElement("h2",{className:"slds-text-heading_small"},"Properties"))),r.a.createElement("div",{"aria-live":"assertive",className:""},this.state.assistiveText))}}]),t}(a.Component)),J=Object(i.b)(function(e){return{canvas:e.canvas,canvasRegions:e.canvasRegions}},function(e){return{updateRegion:function(t,n){return e(function(e,t){return{type:"UPDATE_REGION",region:e,newRegionData:t}}(t,n))}}})(V),Y=n(39);Object(o.render)(r.a.createElement(i.a,{store:L},r.a.createElement(Y.a,{iconPath:"icons"},r.a.createElement(J,null))),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.52306607.chunk.js.map